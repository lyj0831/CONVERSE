"use strict";function code_draw(){var t=$("#canvas").width(),e=$("#canvas").height(),o=document.getElementById("canvas"),r=o.getContext("2d");o.width=t,o.height=e;for(var a="A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0".split(","),n=a.length,s=[],c=0;c<=3;c++){var l=Math.floor(Math.random()*n),i=30*Math.random()*Math.PI/180,l=a[l];s[c]=l.toLowerCase();var d=10+20*c,u=20+8*Math.random();r.font="bold 23px 微软雅黑",r.translate(d,u),r.rotate(i),r.fillStyle=code_randomColor(),r.fillText(l,0,0),r.rotate(-i),r.translate(-d,-u)}s=s.join(""),$("#canvas").attr("data-code",s);for(c=0;c<=5;c++)r.strokeStyle=code_randomColor(),r.beginPath(),r.moveTo(Math.random()*t,Math.random()*e),r.lineTo(Math.random()*t,Math.random()*e),r.stroke();for(c=0;c<=30;c++){r.strokeStyle=code_randomColor(),r.beginPath();d=Math.random()*t,u=Math.random()*e;r.moveTo(d,u),r.lineTo(d+1,u+1),r.stroke()}}function code_randomColor(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}function convertStrToObj(t){return t?JSON.parse(t):{}}$(function(){code_draw(),$("#registor_btn").on("click",function(){code_draw()})}),$("#ucell").blur(function(){/^\d{11}$/.test($("#ucell").val())?$(this).next().text(""):$(this).next().text("请输入11位有效中国手机号码！").css("color","red")}),$("#upwd").blur(function(){var t=$("#upwd").val();/^.{8,12}$/.test(t)?$(this).next().text(""):$(this).next().text("密码为8-12位字符！").css("color","red")}),$("#ucode").blur(function(){$("#ucode").val().toLowerCase()!==$("canvas").attr("data-code")?$(this).next().next().text("您填写的验证码有误，请重新输入!").css("color","red"):$(this).next().next().text("")}),$("#uemail").blur(function(){""==$(this).val()?$(this).next().text("请输入电子邮箱地址!").css("color","red"):/^\w+@(126|163|qq|converse)\.(com|cn)$/.test($(this).val())?$(this).next().text(""):$(this).next().text("请输入有效的电子邮箱地址!").css("color","red")}),$("#usure").blur(function(){$("#usure").val()!==$("#upwd").val()&&$(this).next().text("请再次输入密码").css("color","red")}),$("#registor_check").click(function(){$(this).is(":checked")?($(".registor_user_btn1").css("display","none"),$(".registor_user_btn2").css("display","block")):($(".registor_user_btn1").css("display","block"),$(".registor_user_btn2").css("display","none"))}),$(".registor_user_btn2").click(function(){var t=$("#ucell").val(),e=$("#upwd").val(),o=$("#uemail").val(),r=$(":radio:checked").val(),a=$("#uyear").val()+"年"+parseInt($("#umonth").val())+"月"+$("#udate").val()+"日",n=convertStrToObj($.cookie("users")?$.cookie("users"):"");t in n?alert("用户名已存在！"):(n[t]={pwd:e,sex:r,email:o,birthday:a},$.cookie("users",JSON.stringify(n)),alert("注册成功！"))});